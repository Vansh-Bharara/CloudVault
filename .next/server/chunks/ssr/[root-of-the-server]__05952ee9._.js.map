{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { signOut } from \"next-auth/react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\nexport default function Navbar({ user }: { user: any }) {\n    return (\n        <nav className=\"bg-white shadow-sm border-b border-gray-200\">\n            <div className=\"max-w-6xl mx-auto px-4 flex items-center justify-between h-16\">\n                <Link href=\"/\">\n                    <h1 className=\"text-xl font-bold text-gray-800\">\n                        ‚òÅ Cloud File Manager\n                    </h1>\n                </Link>\n                <div className=\"flex items-center gap-4\">\n                    {user?.image && (\n                        <Image\n                            src={user.image}\n                            alt=\"User Avatar\"\n                            width={32}\n                            height={32}\n                            className=\"rounded-full border\"\n                        />\n                    )}\n                    <span className=\"text-gray-700\">{user?.name}</span>\n                    <button\n                        onClick={() => signOut({ callbackUrl: \"/\" })}\n                        className=\"px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition\"\n                    >\n                        Logout\n                    </button>\n                </div>\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,OAAO,EAAE,IAAI,EAAiB;IAClD,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;8BACP,cAAA,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;;;;;;8BAIpD,8OAAC;oBAAI,WAAU;;wBACV,MAAM,uBACH,8OAAC,6HAAA,CAAA,UAAK;4BACF,KAAK,KAAK,KAAK;4BACf,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAGlB,8OAAC;4BAAK,WAAU;sCAAiB,MAAM;;;;;;sCACvC,8OAAC;4BACG,SAAS,IAAM,CAAA,GAAA,8IAAA,CAAA,UAAO,AAAD,EAAE;oCAAE,aAAa;gCAAI;4BAC1C,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/FileList.tsx"],"sourcesContent":["\"use client\";\n\nimport { ChangeEvent, useEffect, useState } from \"react\";\nimport { toast } from \"sonner\";\n\ntype FileItem = {\n  id: string;\n  filename: string;\n  s3Key: string;\n  size: number;\n  mimeType: string;\n  createdAt: string;\n};\n\nexport default function FileList() {\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState('')\n\n  async function fetchFiles() {\n    try {\n      setLoading(true);\n      const endpoint = query ? `/api/files/search?q=${query}` : \"/api/files/list\"\n      const res = await fetch(endpoint)\n      if (!res.ok) throw new Error(\"Failed to fetch files\")\n      const data = await res.json()\n      setFiles(data)\n    }\n    catch(err){\n      console.error(err)\n      setFiles([])\n    }\n    finally{\n      setLoading(false)\n    }\n  }\n\n  const onQueryChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setQuery(e?.target?.value)\n  }\n\n  useEffect(() => {\n\n    if(!query){\n      fetchFiles()\n      return;\n    }\n    const timeout = setTimeout(fetchFiles, 500)\n\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [query]);\n\n  async function handleDownload(id: string) {\n    const res = await fetch(`/api/files/download/${id}`);\n    if (!res.ok) {\n      alert(\"Failed to get download URL\");\n      return;\n    }\n    const { url } = await res.json();\n    // open in new tab (download)\n    window.open(url, \"_blank\");\n  }\n\n  async function handleDelete(id: string) {\n    if (!confirm(\"Delete this file?\")) return;\n    const res = await fetch(`/api/files/delete/${id}`, { method: \"DELETE\" });\n    if (res.ok) {\n      setFiles(f => f.filter(x => x.id !== id));\n      toast(\"File deleted successfully !\")\n    } else {\n      alert(\"Failed to delete\");\n    }\n  }\n\n  if (loading) return (\n    <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-600\">\n      Loading files...\n    </div>\n  );\n\n  if (!files.length) return (\n    <>\n      <input type=\"text\" placeholder=\"search\" className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\" onChange={onQueryChange} value={query} />\n      <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-500\">\n        No files yet.\n      </div>\n    </>\n  );\n\n  return (\n    <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 overflow-hidden mt-4 py-2 px-3\">\n      <input type=\"text\" placeholder=\"search\" className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\" onChange={onQueryChange} value={query} />\n      <div className=\"divide-y divide-gray-100\">\n        {files.map((f) => (\n          <div key={f.id} className=\"grid grid-cols-12 items-center px-4 py-3 hover:bg-gray-50 transition\">\n            <div className=\"col-span-6\">\n              <div className=\"font-medium text-gray-800 truncate\" title={f.filename}>{f.filename}</div>\n              <div className=\"text-xs text-gray-500\">{new Date(f.createdAt).toLocaleString()}</div>\n            </div>\n            <div className=\"col-span-3 text-sm text-gray-500 truncate\" title={f.mimeType}>{f.mimeType}</div>\n            <div className=\"col-span-3 flex items-center justify-end gap-2\">\n              <button onClick={() => handleDownload(f.id)} className=\"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition\">\n                Download\n              </button>\n              <button onClick={() => handleDelete(f.id)} className=\"px-3 py-1.5 bg-red-500 text-white rounded-md text-sm hover:bg-red-600 transition\">\n                Delete\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}