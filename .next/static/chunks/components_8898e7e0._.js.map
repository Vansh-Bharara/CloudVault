{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { signOut } from \"next-auth/react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\nexport default function Navbar({ user }: { user: any }) {\n    return (\n        <nav className=\"bg-white shadow-sm border-b border-gray-200\">\n            <div className=\"max-w-6xl mx-auto px-4 flex items-center justify-between h-16\">\n                <Link href=\"/\">\n                    <h1 className=\"text-xl font-bold text-gray-800\">\n                        ‚òÅ Cloud File Manager\n                    </h1>\n                </Link>\n                <div className=\"flex items-center gap-4\">\n                    {user?.image && (\n                        <Image\n                            src={user.image}\n                            alt=\"User Avatar\"\n                            width={32}\n                            height={32}\n                            className=\"rounded-full border\"\n                        />\n                    )}\n                    <span className=\"text-gray-700\">{user?.name}</span>\n                    <button\n                        onClick={() => signOut({ callbackUrl: \"/\" })}\n                        className=\"px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition\"\n                    >\n                        Logout\n                    </button>\n                </div>\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,OAAO,KAAuB;QAAvB,EAAE,IAAI,EAAiB,GAAvB;IAC3B,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC,+JAAA,CAAA,UAAI;oBAAC,MAAK;8BACP,cAAA,6LAAC;wBAAG,WAAU;kCAAkC;;;;;;;;;;;8BAIpD,6LAAC;oBAAI,WAAU;;wBACV,CAAA,iBAAA,2BAAA,KAAM,KAAK,mBACR,6LAAC,gIAAA,CAAA,UAAK;4BACF,KAAK,KAAK,KAAK;4BACf,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAGlB,6LAAC;4BAAK,WAAU;sCAAiB,iBAAA,2BAAA,KAAM,IAAI;;;;;;sCAC3C,6LAAC;4BACG,SAAS,IAAM,CAAA,GAAA,iJAAA,CAAA,UAAO,AAAD,EAAE;oCAAE,aAAa;gCAAI;4BAC1C,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;KA9BwB","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/FileList.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, ChangeEvent } from \"react\";\nimport { toast } from \"sonner\";\n\ntype FileItem = {\n  fileId: string;\n  originalName: string;\n  latestVersion: number;\n  mimeType: string; // from latest version\n  updatedAt: string;\n};\n\ntype FileVersion = {\n  versionNumber: number;\n  size: number;\n  mimeType: string;\n  uploadedAt: string;\n};\n\nexport default function FileList() {\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [filteredFiles, setFilteredFiles] = useState<FileItem[]>([]);\n  const [versions, setVersions] = useState<FileVersion[]>([]);\n  const [expandedFileId, setExpandedFileId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState(\"\");\n\n  async function fetchFiles() {\n    try {\n      setLoading(true);\n      const res = await fetch(\"/api/files\");\n      if (!res.ok) throw new Error(\"Failed to fetch files\");\n      const data = await res.json();\n      setFiles(data);\n      setFilteredFiles(data);\n    } catch (err) {\n      console.error(err);\n      setFiles([]);\n      setFilteredFiles([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function fetchVersions(fileId: string) {\n    const res = await fetch(`/api/files/${fileId}/versions`);\n    if (!res.ok) return;\n    const data = await res.json();\n    setVersions(data);\n  }\n\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n\n  // client-side search (simple & acceptable)\n  useEffect(() => {\n    if (!query) {\n      setFilteredFiles(files);\n    } else {\n      setFilteredFiles(\n        files.filter((f) =>\n          f.originalName.toLowerCase().includes(query.toLowerCase())\n        )\n      );\n    }\n  }, [query, files]);\n\n  async function handleDownloadLatest(fileId: string) {\n    const res = await fetch(`/api/files/${fileId}/download/latest`);\n    if (!res.ok) {\n      toast.error(\"Failed to get download URL\");\n      return;\n    }\n    const { url } = await res.json();\n    window.open(url, \"_blank\");\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-600\">\n        Loading files...\n      </div>\n    );\n  }\n\n  if (!filteredFiles.length) {\n    return (\n      <>\n        <input\n          type=\"text\"\n          placeholder=\"search\"\n          className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\"\n          value={query}\n          onChange={(e: ChangeEvent<HTMLInputElement>) =>\n            setQuery(e.target.value)\n          }\n        />\n        <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-500\">\n          No files yet.\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 overflow-hidden mt-4 py-2 px-3\">\n      {/* Search bar */}\n      <input\n        type=\"text\"\n        placeholder=\"search\"\n        className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\"\n        value={query}\n        onChange={(e: ChangeEvent<HTMLInputElement>) =>\n          setQuery(e.target.value)\n        }\n      />\n\n      <div className=\"divide-y divide-gray-100\">\n        {filteredFiles.map((f) => (\n          <div key={f.fileId} className=\"px-4 py-3\">\n            {/* FILE ROW */}\n            <div\n              className=\"grid grid-cols-12 items-center hover:bg-gray-50 transition cursor-pointer\"\n              onClick={() => {\n                const next =\n                  expandedFileId === f.fileId ? null : f.fileId;\n                setExpandedFileId(next);\n                if (next) fetchVersions(f.fileId);\n              }}\n            >\n              <div className=\"col-span-4\">\n                <div\n                  className=\"font-medium text-gray-800 truncate\"\n                  title={f.originalName}\n                >\n                  {f.originalName}\n                </div>\n                <div className=\"text-xs text-gray-500\">\n                  {new Date(f.updatedAt).toLocaleString()}\n                </div>\n              </div>\n\n              {/* File type */}\n              <div className=\"col-span-3 text-sm text-gray-500\">\n                Latest v{f.latestVersion}\n              </div>\n\n              <div\n                className=\"col-span-3 text-sm text-gray-500 truncate\"\n              >\n                Show verions\n              </div>\n\n              {/* Actions */}\n              <div className=\"col-span-2 flex items-center justify-end gap-2\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDownloadLatest(f.fileId);\n                  }}\n                  className=\"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition\"\n                >\n                  Download\n                </button>\n              </div>\n            </div>\n\n            {/* VERSION LIST */}\n            {expandedFileId === f.fileId && (\n              <div className=\"mt-2 ml-4 border-l pl-4 space-y-2\">\n                {versions.map((v) => (\n                  <div\n                    key={v.versionNumber}\n                    className=\"flex justify-between text-sm text-gray-600\"\n                  >\n                    {/* <p>File Type : {v.mimeType}</p> */}\n                    <span>Version {v.versionNumber}</span>\n                    <span>\n                      {new Date(v.uploadedAt).toLocaleString()}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}