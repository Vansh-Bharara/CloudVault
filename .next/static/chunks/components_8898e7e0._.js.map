{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { signOut } from \"next-auth/react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\nexport default function Navbar({ user }: { user: any }) {\n    return (\n        <nav className=\"bg-white shadow-sm border-b border-gray-200\">\n            <div className=\"max-w-6xl mx-auto px-4 flex items-center justify-between h-16\">\n                <Link href=\"/\">\n                    <h1 className=\"text-xl font-bold text-gray-800\">\n                        ☁ Cloud File Manager\n                    </h1>\n                </Link>\n                <div className=\"flex items-center gap-4\">\n                    {user?.image && (\n                        <Image\n                            src={user.image}\n                            alt=\"User Avatar\"\n                            width={32}\n                            height={32}\n                            className=\"rounded-full border\"\n                        />\n                    )}\n                    <span className=\"text-gray-700\">{user?.name}</span>\n                    <button\n                        onClick={() => signOut({ callbackUrl: \"/\" })}\n                        className=\"px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition\"\n                    >\n                        Logout\n                    </button>\n                </div>\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,OAAO,KAAuB;QAAvB,EAAE,IAAI,EAAiB,GAAvB;IAC3B,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC,+JAAA,CAAA,UAAI;oBAAC,MAAK;8BACP,cAAA,6LAAC;wBAAG,WAAU;kCAAkC;;;;;;;;;;;8BAIpD,6LAAC;oBAAI,WAAU;;wBACV,CAAA,iBAAA,2BAAA,KAAM,KAAK,mBACR,6LAAC,gIAAA,CAAA,UAAK;4BACF,KAAK,KAAK,KAAK;4BACf,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAGlB,6LAAC;4BAAK,WAAU;sCAAiB,iBAAA,2BAAA,KAAM,IAAI;;;;;;sCAC3C,6LAAC;4BACG,SAAS,IAAM,CAAA,GAAA,iJAAA,CAAA,UAAO,AAAD,EAAE;oCAAE,aAAa;gCAAI;4BAC1C,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;KA9BwB","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/vansshbarara/Desktop/e/web%20dev/ntccMajorCloudVault/components/FileList.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, ChangeEvent } from \"react\";\nimport { toast } from \"sonner\";\n\ntype FileItem = {\n  fileId: string;\n  originalName: string;\n  latestVersion: number;\n  mimeType: string; // from latest version\n  updatedAt: string;\n};\n\ntype FileVersion = {\n  versionNumber: number;\n  size: number;\n  mimeType: string;\n  uploadedAt: string;\n};\n\nexport default function FileList() {\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [filteredFiles, setFilteredFiles] = useState<FileItem[]>([]);\n  const [versions, setVersions] = useState<FileVersion[]>([]);\n  const [expandedFileId, setExpandedFileId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState(\"\");\n\n  async function fetchFiles() {\n    try {\n      setLoading(true);\n      const res = await fetch(\"/api/files\");\n      if (!res.ok) throw new Error(\"Failed to fetch files\");\n      const data = await res.json();\n      setFiles(data);\n      setFilteredFiles(data);\n    } catch (err) {\n      console.error(err);\n      setFiles([]);\n      setFilteredFiles([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function fetchVersions(fileId: string) {\n    const res = await fetch(`/api/files/${fileId}/versions`);\n    if (!res.ok) return;\n    const data = await res.json();\n    setVersions(data);\n  }\n\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n\n  // client-side search (simple & acceptable)\n  useEffect(() => {\n    if (!query) {\n      setFilteredFiles(files);\n    } else {\n      setFilteredFiles(\n        files.filter((f) =>\n          f.originalName.toLowerCase().includes(query.toLowerCase())\n        )\n      );\n    }\n  }, [query, files]);\n\n  async function handleDownloadLatest(fileId: string) {\n    const res = await fetch(`/api/files/${fileId}/download/latest`);\n    if (!res.ok) {\n      toast.error(\"Failed to get download URL\");\n      return;\n    }\n    const { url } = await res.json();\n    window.open(url, \"_blank\");\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-600\">\n        Loading files...\n      </div>\n    );\n  }\n\n  if (!filteredFiles.length) {\n    return (\n      <>\n        <input\n          type=\"text\"\n          placeholder=\"search\"\n          className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\"\n          value={query}\n          onChange={(e: ChangeEvent<HTMLInputElement>) =>\n            setQuery(e.target.value)\n          }\n        />\n        <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-500\">\n          No files yet.\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 overflow-hidden mt-4 py-2 px-3\">\n      {/* Search bar */}\n      <input\n        type=\"text\"\n        placeholder=\"search\"\n        className=\"px-3 py-2 w-64 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-2\"\n        value={query}\n        onChange={(e: ChangeEvent<HTMLInputElement>) =>\n          setQuery(e.target.value)\n        }\n      />\n\n      <div className=\"divide-y divide-gray-100\">\n        {filteredFiles.map((f) => (\n          <div key={f.fileId} className=\"px-4 py-3\">\n            {/* FILE ROW */}\n            <div\n              className=\"grid grid-cols-12 items-center hover:bg-gray-50 transition cursor-pointer\"\n              onClick={() => {\n                const next =\n                  expandedFileId === f.fileId ? null : f.fileId;\n                setExpandedFileId(next);\n                if (next) fetchVersions(f.fileId);\n              }}\n            >\n              <div className=\"col-span-4\">\n                <div\n                  className=\"font-medium text-gray-800 truncate\"\n                  title={f.originalName}\n                >\n                  {f.originalName}\n                </div>\n                <div className=\"text-xs text-gray-500\">\n                  {new Date(f.updatedAt).toLocaleString()}\n                </div>\n              </div>\n\n              {/* File type */}\n              <div className=\"col-span-3 text-sm text-gray-500\">\n                Latest v{f.latestVersion}\n              </div>\n\n              <div\n                className=\"col-span-3 text-sm text-gray-500 truncate\"\n              >\n                Show verions\n              </div>\n\n              {/* Actions */}\n              <div className=\"col-span-2 flex items-center justify-end gap-2\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDownloadLatest(f.fileId);\n                  }}\n                  className=\"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition\"\n                >\n                  Download\n                </button>\n              </div>\n            </div>\n\n            {/* VERSION LIST */}\n            {expandedFileId === f.fileId && (\n              <div className=\"mt-2 ml-4 border-l pl-4 space-y-2\">\n                {versions.map((v) => (\n                  <div\n                    key={v.versionNumber}\n                    className=\"flex justify-between text-sm text-gray-600\"\n                  >\n                    {/* <p>File Type : {v.mimeType}</p> */}\n                    <span>Version {v.versionNumber}</span>\n                    <span>\n                      {new Date(v.uploadedAt).toLocaleString()}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// \"use client\";\n\n// import { useEffect, useState } from \"react\";\n\n// type FileItem = {\n//   fileId: string;\n//   originalName: string;\n//   latestVersion: number;\n//   updatedAt: string;\n// };\n\n// export default function FileList() {\n//   const [files, setFiles] = useState<FileItem[]>([]);\n//   const [loading, setLoading] = useState(false);\n\n//   // modal-related state\n//   const [modalFile, setModalFile] = useState<FileItem | null>(null);\n//   const [versions, setVersions] = useState<any[]>([]);\n\n//   async function fetchFiles() {\n//     try {\n//       setLoading(true);\n//       const res = await fetch(\"/api/files\");\n//       if (!res.ok) throw new Error(\"Failed to fetch files\");\n//       const data = await res.json();\n//       setFiles(data);\n//     } catch (err) {\n//       console.error(err);\n//       setFiles([]);\n//     } finally {\n//       setLoading(false);\n//     }\n//   }\n\n//   async function fetchVersions(fileId: string) {\n//     const res = await fetch(`/api/files/${fileId}/versions`);\n//     if (!res.ok) return;\n//     const data = await res.json();\n//     setVersions(data);\n//   }\n\n//   useEffect(() => {\n//     fetchFiles();\n//   }, []);\n\n//   // lock background scroll when modal is open\n//   useEffect(() => {\n//     document.body.style.overflow = modalFile ? \"hidden\" : \"\";\n//     return () => {\n//       document.body.style.overflow = \"\";\n//     };\n//   }, [modalFile]);\n\n//   if (loading) {\n//     return (\n//       <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-600\">\n//         Loading files...\n//       </div>\n//     );\n//   }\n\n//   if (!files.length) {\n//     return (\n//       <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 p-6 text-gray-500\">\n//         No files yet.\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <>\n//       {/* FILE LIST */}\n//       <div className=\"bg-white/80 backdrop-blur-md rounded-2xl border border-gray-100 overflow-hidden mt-4 py-2 px-3\">\n//         <div className=\"divide-y divide-gray-100\">\n//           {files.map((f) => (\n//             <div key={f.fileId} className=\"px-4 py-3\">\n//               <div\n//                 className=\"grid grid-cols-12 items-center hover:bg-gray-50 transition cursor-pointer\"\n//                 onClick={async () => {\n//                   await fetchVersions(f.fileId);\n//                   setModalFile(f);\n//                 }}\n//               >\n//                 <div className=\"col-span-6\">\n//                   <div className=\"font-medium text-gray-800 truncate\">\n//                     {f.originalName}\n//                   </div>\n//                   <div className=\"text-xs text-gray-500\">\n//                     Updated: {new Date(f.updatedAt).toLocaleString()}\n//                   </div>\n//                 </div>\n\n//                 <div className=\"col-span-3 text-sm text-gray-500\">\n//                   Latest v{f.latestVersion}\n//                 </div>\n\n//                 <div className=\"col-span-3 text-right text-sm text-blue-600\">\n//                   Show versions\n//                 </div>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n\n//       {/* MODAL */}\n//       {modalFile && (\n//         <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n//           {/* Backdrop */}\n//           <div\n//             className=\"absolute inset-0 bg-black/30 backdrop-blur-sm\"\n//             onClick={() => setModalFile(null)}\n//           />\n\n//           {/* Modal box */}\n//           <div className=\"relative z-10 w-full max-w-md rounded-2xl bg-white/90 backdrop-blur-xl shadow-xl border border-gray-200 p-6\">\n//             <div className=\"flex items-center justify-between mb-4\">\n//               <h2 className=\"text-lg font-semibold text-gray-800 truncate\">\n//                 {modalFile.originalName}\n//               </h2>\n//               <button\n//                 onClick={() => setModalFile(null)}\n//                 className=\"text-gray-400 hover:text-gray-600\"\n//               >\n//                 ✕\n//               </button>\n//             </div>\n\n//             <div className=\"space-y-3 max-h-80 overflow-y-auto\">\n//               {versions.map((v) => (\n//                 <div\n//                   key={v.versionNumber}\n//                   className=\"flex justify-between text-sm text-gray-600\"\n//                 >\n//                   <span>Version {v.versionNumber}</span>\n//                   <span>{new Date(v.uploadedAt).toLocaleString()}</span>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n//         </div>\n//       )}\n//     </>\n//   );\n// }\n\n"],"names":[],"mappings":"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","debugId":null}}]
}